<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=US-ASCII" http-equiv="Content-Type">

<title>README - powercontroller9202-1.0.2 Documentation</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body class="file">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="./History_txt.html">History</a>
  
    <li class="file"><a href="./Manifest_txt.html">Manifest</a>
  
    <li class="file"><a href="./README_txt.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./PowerController9202.html">PowerController9202</a>
  
    <li><a href="./PowerController9202Array.html">PowerController9202Array</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation" class="description">
  
<h1 id="label-powercontroller9202">powercontroller9202</h1>
<ul><li>
<p><a
href="https://github.com/rbur004/powercontroller9202">github.com/rbur004/powercontroller9202</a></p>
</li></ul>

<h2 id="label-DESCRIPTION%3A">DESCRIPTION:</h2>

<p>A Ruby GEDCOM to communicate with an Aviosys Inc. 9202 IP Power Controller
(and associated products (eg 9212)).</p>

<h2 id="label-FEATURES%2FPROBLEMS%3A">FEATURES/PROBLEMS:</h2>
<ul><li>
<p>see the status of the relays</p>
</li><li>
<p>turns relays on and off without altering the saved state on power up</p>
</li><li>
<p>turns relays on and off, and alters the saved state for next power up</p>
</li><li>
<p>Toggles any or all relays</p>
</li></ul>

<h2 id="label-SYNOPSIS%3A">SYNOPSIS:</h2>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">'powercontroller9202'</span>

<span class="ruby-comment">#Default to relay off state being a power on state</span>
<span class="ruby-identifier">pc</span> = <span class="ruby-constant">PowerController9202</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;192.168.249.128&quot;</span>, <span class="ruby-string">&quot;admin&quot;</span>, <span class="ruby-string">&quot;xxxxx&quot;</span>)

<span class="ruby-comment">#change so relay off state is a power off state</span>
<span class="ruby-comment">#pc = PowerController9202.new(&quot;192.168.249.128&quot;, &quot;admin&quot;, &quot;xxxxxx&quot;, false)</span>

<span class="ruby-comment">#8 relays, not 4</span>
<span class="ruby-comment">#relay off state is a power on state</span>
<span class="ruby-comment">#pc = PowerController9202.new(&quot;192.168.249.128&quot;, &quot;admin&quot;, &quot;xxxxxx&quot;, true, 8)</span>

<span class="ruby-comment">#Manually set the portmap. Nb portmap[0] is unused.</span>
<span class="ruby-comment">#pc = PowerController9202.new(&quot;192.168.249.128&quot;, &quot;admin&quot;, &quot;xxxxxx&quot;)</span>
<span class="ruby-comment">#pc.portmap = [0,0,2,5,7,1,3,4,6] </span>
<span class="ruby-comment">#pc.set_status #to update the status bitmap</span>

<span class="ruby-identifier">puts</span> <span class="ruby-identifier">pc</span>.<span class="ruby-identifier">status</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-comment">#current relay states as array of 0's and 1's for relay off and on</span>
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">pc</span>.<span class="ruby-identifier">to_s</span>([<span class="ruby-string">'server'</span>, <span class="ruby-string">'modem'</span>, <span class="ruby-string">'lights'</span>, <span class="ruby-string">'tv'</span>]) <span class="ruby-comment">#outputs relay status with names.</span>
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">pc</span> <span class="ruby-comment">#Prints the relay status (Equivalent to puts pc.to_s )</span>

<span class="ruby-identifier">exit</span> <span class="ruby-comment">#currently testing against an installed controller , as the test version failed.</span>

<span class="ruby-comment">#Power on means the relay switch the power on, even if the relay power is off</span>
<span class="ruby-comment">#Relay on, means the relay is powered, but that might mean the power is then off.</span>
<span class="ruby-identifier">pc</span>.<span class="ruby-identifier">ensureon</span>   <span class="ruby-comment">#Turns all relays to the power on state (not saved)</span>
<span class="ruby-identifier">pc</span>.<span class="ruby-identifier">off</span>([<span class="ruby-value">2</span>,<span class="ruby-value">4</span>])  <span class="ruby-comment">#Turns relays 2 and 4 power off (not saved)</span>
<span class="ruby-identifier">pc</span>.<span class="ruby-identifier">on</span>([<span class="ruby-value">2</span>,<span class="ruby-value">4</span>])   <span class="ruby-comment">#Turns relays 2 and 4 power on (not saved)</span>

<span class="ruby-identifier">pg</span>.<span class="ruby-identifier">toggle_all</span>     <span class="ruby-comment">#Turns power off for 5 seconds through all relays (understands my off is on)</span>
<span class="ruby-identifier">pg</span>.<span class="ruby-identifier">toggle_all</span>(<span class="ruby-value">10</span>) <span class="ruby-comment">#Turns power on for 10 seconds through all relays (understands my off is on)</span>

<span class="ruby-identifier">pc</span>.<span class="ruby-identifier">toggle</span>(<span class="ruby-value">1</span>)     <span class="ruby-comment">#Turns power off for 5 seconds through relay 1(understands my off is on).</span>
<span class="ruby-identifier">pc</span>.<span class="ruby-identifier">toggle</span>(<span class="ruby-value">1</span>,<span class="ruby-value">10</span>)  <span class="ruby-comment">#Turns power off for 10 seconds through relay 1 (understands my off is on)</span>

<span class="ruby-identifier">pc</span>.<span class="ruby-identifier">toggle</span>([<span class="ruby-value">1</span>,<span class="ruby-value">4</span>]) <span class="ruby-comment">#Turns power off for 5 seconds through relay 1 &amp; 4 (understands my off is on)</span>
<span class="ruby-identifier">pc</span>.<span class="ruby-identifier">toggle</span>([<span class="ruby-value">2</span>,<span class="ruby-value">3</span>],<span class="ruby-value">10</span>) <span class="ruby-comment">#Turns power off for 10 seconds through relays 2 &amp; 3 (understands my off is on).</span>

<span class="ruby-comment">#Via the web form, rather thon SetIO</span>
<span class="ruby-identifier">pc</span>.<span class="ruby-identifier">reset_all</span>  <span class="ruby-comment">#Sets relays to off state (Relays off, not necessarily power off)</span>
           <span class="ruby-comment">#For mine, that is an on state as I want the failure state to be on</span>
           <span class="ruby-comment">#The web interface shows them as off though.</span>

<span class="ruby-comment">#Via the web form, rather thon SetIO</span>
<span class="ruby-identifier">pc</span>.<span class="ruby-identifier">timer_toggle_all</span> <span class="ruby-comment">#Turns off the relays, then on again after 5 seconds</span>
<span class="ruby-identifier">pc</span>.<span class="ruby-identifier">timer_toggle_all</span>(<span class="ruby-value">10</span>) <span class="ruby-comment">#Turns off the relays, then on again after 10 seconds</span>

<span class="ruby-comment">#Via the web form, rather thon SetIO</span>
<span class="ruby-identifier">pc</span>.<span class="ruby-identifier">on2</span>(<span class="ruby-value">3</span>)  <span class="ruby-comment">#Turns relay 3 power on and it shows up that way in the web interface.</span>
           <span class="ruby-comment">#Hence will be set this way after the 9202 is power cycled.</span>
<span class="ruby-identifier">pc</span>.<span class="ruby-identifier">off2</span>(<span class="ruby-value">2</span>) <span class="ruby-comment">#Turns relay 2 power off and it shows up that way in the web interface.</span>
           <span class="ruby-comment">#Hence will be set this way after the 9202 is power cycled.</span>
</pre>

<h2 id="label-REQUIREMENTS%3A">REQUIREMENTS:</h2>
<ul><li>
<p>require 'rubygems'</p>
</li><li>
<p>require 'powercontroller9202'</p>
</li></ul>

<h2 id="label-INSTALL%3A">INSTALL:</h2>
<ul><li>
<p>sudo gem install powercontroller9202</p>
</li></ul>

<h2 id="label-LICENSE%3A">LICENSE:</h2>

<p>Distributed under the Ruby License.</p>

<p>Copyright (c) 2009</p>
<ol><li>
<p>You may make and give away verbatim copies of the source form of the
software without restriction, provided that you duplicate all of the
original copyright notices and associated disclaimers.</p>
</li><li>
<p>You may modify your copy of the software in any way, provided that you do
at least ONE of the following:</p>

<pre>a) place your modifications in the Public Domain or otherwise
   make them Freely Available, such as by posting said</pre>
</li></ol>

<pre>modifications to Usenet or an equivalent medium, or by allowing
the author to include your modifications in the software.

   b) use the modified software only within your corporation or
      organization.

   c) rename any non-standard executables so the names do not conflict
with standard executables, which must also be provided.

   d) make other distribution arrangements with the author.</pre>
<ol><li>
<p>You may distribute the software in object code or executable form, provided
that you do at least ONE of the following:</p>

<pre>a) distribute the executables and library files of the software,</pre>
</li></ol>

<pre>together with instructions (in the manual page or equivalent)
on where to get the original distribution.

   b) accompany the distribution with the machine-readable source of
the software.

   c) give non-standard executables non-standard names, with
      instructions on where to get the original software distribution.

   d) make other distribution arrangements with the author.</pre>
<ol><li>
<p>You may modify and include the part of the software into any other software
(possibly commercial).  But some files in the distribution may not have
been written by the author, so that they are not under this terms.</p>
</li><li>
<p>The scripts and library files supplied as input to or produced as  output
from the software do not automatically fall under the copyright of the
software, but belong to whomever generated them,  and may be sold
commercially, and may be aggregated with this software.</p>
</li><li>
<p>THIS SOFTWARE IS PROVIDED "AS IS" AND WITHOUT ANY EXPRESS OR IMPLIED
WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.</p>
</li></ol>

</div>



<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

